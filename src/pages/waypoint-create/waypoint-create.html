<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>{{ 'WAYPOINT_CREATE.TITLE' | translate }}</ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <form novalidate [formGroup]="creationForm">
    <ion-grid>
      <ion-row>
        <ion-col col-12>
          <!-- Contexte -->
          <ion-item>
            <ion-label floating>{{ 'WAYPOINT_CREATE.FORM.CONTEXT' | translate }}</ion-label>
            <ion-textarea [(ngModel)]="waypoint.context" formControlName="contextControl" name="context"></ion-textarea>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-12>
          <!-- Action réalisée -->
          <ion-item>
            <ion-label floating>{{ 'WAYPOINT_CREATE.FORM.ACTION_PERFORMED' | translate }}</ion-label>
            <ion-textarea [(ngModel)]="waypoint.actionPerformed" formControlName="actionPerformedControl" name="actionPerformed"></ion-textarea>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6>
          <!-- Commentaire cadre -->
          <ion-item>
            <ion-label floating>{{ 'WAYPOINT_CREATE.FORM.MANAGER_COMMENT' | translate }}</ion-label>
            <ion-textarea [(ngModel)]="waypoint.managerComment" formControlName="managerCommentControl" name="managerComment"></ion-textarea>
          </ion-item>
        </ion-col>
        <ion-col col-6>
          <!-- Commentaire PNC -->
          <ion-item>
            <ion-label floating>{{ 'WAYPOINT_CREATE.FORM.PNC_COMMENT' | translate }}</ion-label>
            <ion-textarea [(ngModel)]="waypoint.pncComment" formControlName="pncCommentControl" name="pncComment"></ion-textarea>
          </ion-item>
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-6>
          <!-- Initiateur -->
          <ion-label stacked>{{ 'WAYPOINT_CREATE.FORM.INITIATOR' | translate }}</ion-label>
          <ion-list radio-group [(ngModel)]="waypoint.initiator" formControlName="initiatorControl">
            <ion-item>
              <ion-label>{{ 'GLOBAL.PNC_ROLE.MANAGER' | translate }}</ion-label>
              <ion-radio value="MANAGER"></ion-radio>
            </ion-item>

            <ion-item>
              <ion-label>{{ 'GLOBAL.PNC_ROLE.PNC' | translate }}</ion-label>
              <ion-radio value="PNC"></ion-radio>
            </ion-item>
          </ion-list>
        </ion-col>
        <ion-col col-6>
          <!-- Prochaine rencontre -->
          <ion-label stacked>{{ 'WAYPOINT_CREATE.FORM.NEXT_ENCOUNTER_DATE' | translate }}</ion-label>
          <ion-item>
            <ion-label>
              <ion-icon name="calendar"></ion-icon>
            </ion-label>
            <ion-datetime displayFormat="DD/MM/YYYY" [ngModel]='waypoint.nextEncounterDate | date:"yyyy-MM-ddTHH:mm"' (ngModelChange)="waypoint.nextEncounterDate=$event" formControlName="nextEncounterDateControl"
              [pickerOptions]="customDateTimeOptions" [doneText]="translateService.instant('GLOBAL.DATEPICKER.DONE')" [cancelText]="translateService.instant('GLOBAL.DATEPICKER.CANCEL')"></ion-datetime>
          </ion-item>
        </ion-col>
      </ion-row>
      <!-- Barre de boutons -->
      <ion-row>
        <ion-col col-4>
          <button ion-button (click)="createWaypoint()" [disabled]="creationForm.invalid || saveInProgress" color="primary">
            {{ 'WAYPOINT_CREATE.BUTTONS.SAVE' | translate }}&nbsp;
            <ion-spinner *ngIf="saveInProgress"></ion-spinner>
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
  </form>

</ion-content>