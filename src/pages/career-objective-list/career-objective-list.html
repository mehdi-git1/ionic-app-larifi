<ion-header>
    <ion-navbar>
        <ion-title>{{ 'GLOBAL.DEVELOPMENT_PROGRAM' | translate }}</ion-title>
        <connectivity-indicator></connectivity-indicator>
    </ion-navbar>
</ion-header>

<ion-content padding>
    <h3 margin-horizontal>{{ 'CAREER_OBJECTIVE_LIST.TITLE' | translate }}</h3>
    <button *ngIf="canShowCallFormsBtn()" ion-button color="primary" (click)="callForms()">{{ 'CAREER_OBJECTIVE_LIST.CREATE_EOBSERVATION' | translate }}</button>
    <button (click)="goToCareerObjectiveCreation()" class="add-career-objective">
        <ion-icon name="add"></ion-icon>
        <label>{{ 'CAREER_OBJECTIVE_LIST.BUTTONS.ADD_CAREER_OBJECTIVE' | translate }}</label>
    </button>

    <div *ngIf="!careerObjectiveList" class="spinner-container">
        <ion-spinner></ion-spinner>
    </div>
    <div *ngIf="careerObjectiveList" class="career-objective-list-container">
        <div class="no-objectives" *ngIf="careerObjectiveList.length == 0">{{ 'CAREER_OBJECTIVE_LIST.NO_OBJECTIVES' | translate }}</div>
        <ion-content *ngIf="careerObjectiveList.length > 0" class="career-objective-list">
            <ion-card class="career-objective-card clickable" *ngFor="let careerObjective of careerObjectiveList" (click)="openCareerObjective(careerObjective.techId)">
                <offline-indicator [object]="careerObjective"></offline-indicator>
                <ion-card-content no-padding>
                    <header>
                        <h4>{{careerObjective.title}}</h4>
                        <div class="status-area" float-right>
                            <!-- Prioritaire -->
                            <div class="icon-container">
                                <ion-icon *ngIf="careerObjective.prioritized" name="flag" ios="md-flag" color="red80"></ion-icon>
                            </div>
                            <!-- Initiateur -->
                            <div class="icon-container">
                                <ion-icon name="bulb" ios="md-bulb" *ngIf="careerObjective.initiator === PncRole.PNC"></ion-icon>
                            </div>
                            <!-- Statut -->
                            <ion-badge class="{{careerObjective.careerObjectiveStatus.toLowerCase()}}" *ngIf="careerObjective.careerObjectiveStatus">
                                {{ 'GLOBAL.CAREER_OBJECTIVE_STATUS.'+careerObjective.careerObjectiveStatus | translate }}
                            </ion-badge>
                        </div>
                    </header>
                    <ion-grid class="content">
                        <ion-row>
                            <ion-col>
                                <label>{{ 'CAREER_OBJECTIVE_LIST.LIST.CREATION_DATE' | translate }}</label>
                                <span class="value" [ngClass]="{'no-value' : !careerObjective.creationDate }">{{ careerObjective.creationDate | date: 'dd/MM/yyyy HH:mm'}}</span>
                            </ion-col>
                            <ion-col>
                                <label>{{ 'CAREER_OBJECTIVE_LIST.LIST.ENCOUNTER_DATE' | translate }}</label>
                                <span class="value" [ngClass]="{'no-value' : !careerObjective.encounterDate }">{{careerObjective.encounterDate | date: 'dd/MM/yyyy'}}</span>
                            </ion-col>
                            <ion-col>
                                <label>{{ 'CAREER_OBJECTIVE_LIST.LIST.NEXT_ENCOUNTER_DATE' | translate }}</label>
                                <span class="value" [ngClass]="{'no-value' : !careerObjective.nextEncounterDate }">{{careerObjective.nextEncounterDate | date: 'dd/MM/yyyy'}}</span>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-card-content>
            </ion-card>
        </ion-content>
    </div>
</ion-content>
