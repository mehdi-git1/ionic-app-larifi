<ion-header>
    <ion-navbar>
        <page-header [showSettingsIcon]="true" [pnc]="pnc">
            {{ 'GLOBAL.HR_DOCUMENT' | isMyPage: pnc | translate }}
        </page-header>
    </ion-navbar>
    <pnc-edossier-header [activeTab]="TabHeaderEnum.HR_DOCUMENT_PAGE"></pnc-edossier-header>
</ion-header>
<ion-content padding no-bounce>
    <edossier-spinner *ngIf="!loadingIsOver(); else pageBlock"></edossier-spinner>
    <ng-template #pageBlock>
        <div class="button-bar button-bar-right" *ngIf="canCreateDocument()">
            <button ion-button (click)="createNewDocument()" color="primary-light" icon-start>
                <ion-icon name="md-add" ios="md-add"></ion-icon>
                {{ 'HR_DOCUMENT.BUTTONS.CREATE_NEW_DOCUMENT' | translate }}
            </button>
        </div>
        <ion-content class="hr-document-list-container">
            <span *ngIf="!searchInProgress">
                <div *ngIf="hrDocuments && hrDocuments.length == 0" class="no-data-found">
                    <no-data></no-data>
                </div>




                <!-- liste des documents RH -->
                <span *ngIf="hrDocuments && hrDocuments.length > 0; else noHrDocumentsBlock">
                    <ion-grid class="hr-document-grid selectable" [sortableGrid]="hrDocuments">
                        <ion-row class="headers" align-items-center>
                            <ion-col class="column-date" columnName="creationDate" sort>
                                {{ 'HR_DOCUMENT.CREATION_DATE' | translate }}
                                <ion-icon id="sortIcon" class="sort-icon" color="black" ios="md-arrow-dropdown"
                                    md="md-arrow-dropdown">
                                </ion-icon>
                            </ion-col>
                            <ion-col class="column-category" columnName="category" sort>
                                {{ 'HR_DOCUMENT.CATEGORY' | translate }}
                                <ion-icon id="sortIcon" class="sort-icon" color="black" ios="md-arrow-dropdown"
                                    md="md-arrow-dropdown">
                                </ion-icon>
                            </ion-col>
                            <ion-col class="column-specific"></ion-col>
                            <ion-col class="column-title" columnName="event">
                                {{ 'HR_DOCUMENT.TITLE' | translate }}
                            </ion-col>
                            <ion-col class="column-redactor" columnName="author">
                                {{ 'HR_DOCUMENT.REDACTOR' | translate }}
                            </ion-col>
                        </ion-row>
                        <ion-row class="hr-document-row" *ngFor="let hrDocument of hrDocuments">
                            <ion-col class="column-date">{{hrDocument.creationDate | date:'dd/MM/yyyy' }}
                            </ion-col>
                            <ion-col class="column-category">
                                <div class="category-label">{{hrDocument.category?.label}}</div>
                            </ion-col>
                            <ion-col class="column-specific">
                                <ion-icon *ngIf="hrDocumentHasAttachments(hrDocument)" name="attach">
                                </ion-icon>
                            </ion-col>
                            <ion-col class="column-title">
                                <span class="truncate-text">{{hrDocument.title}}</span>
                            </ion-col>
                            <ion-col class="column-redactor">
                                <span class="truncate-text">{{hrDocument.redactor?.lastName}}
                                    {{hrDocument.redactor?.firstName | titlecase}}
                                </span>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </span>
                <!-- fin -->

            </span>
            <ion-infinite-scroll (ionInfinite)="$event.waitFor(doInfinite($event))">
                <ion-infinite-scroll-content></ion-infinite-scroll-content>
            </ion-infinite-scroll>
        </ion-content>
        <!-- <ng-template #noHrDocumentsBlock>
            <no-data></no-data>
        </ng-template> -->
    </ng-template>
</ion-content>