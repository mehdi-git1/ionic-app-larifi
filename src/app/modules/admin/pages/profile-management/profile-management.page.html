<ion-header>
    <ion-navbar>
        <page-header [showSettingsIcon]="false">
            {{ 'ADMIN.PROFILE_MANAGEMENT.TITLE' | translate }}
        </page-header>
    </ion-navbar>
</ion-header>

<ion-content padding no-bounce>
    <ion-grid>
        <ion-row>
            <!-- Header du tableau -->
            <ion-col>
                <ion-item>
                    <ion-label class="tab_header">{{ 'ADMIN.PROFILE_MANAGEMENT.HEADER.PROFILE_HEADER' | translate }}</ion-label>
                </ion-item>
            </ion-col>
            <ion-col>
                <ion-item>
                    <ion-label class="tab_header">
                        {{ 'ADMIN.PROFILE_MANAGEMENT.HEADER.PERMISSION_HEADER' | translate }}
                        <span *ngIf="selectedProfile != null;"> - </span> {{ selectedProfile }}
                    </ion-label>
                </ion-item>
            </ion-col>
        </ion-row>
        <ion-row>
            <!-- Liste des profils -->
            <ion-col>
                <ion-item class="profileList" *ngFor="let userProfile of userProfiles" (click)="goToPermissionManagement(userProfile.name)">
                    <button ion-button color="light" full>{{ userProfile.name }}</button>
                </ion-item>
            </ion-col>
            <ion-col>
                <ion-row>
                    <!-- Permissions d'un profil -->
                    <ion-col>
                        <ion-list>
                            <ion-label *ngIf="allPermissions == null;">{{ 'ADMIN.PROFILE_MANAGEMENT.LABEL' | translate }}</ion-label>
                            <ion-item *ngFor="let permission of allPermissions">
                                <ion-label left> {{ permission.name }} </ion-label>
                                <ion-checkbox [(ngModel)]="permission.checked" [checked]="permission.checked" item-right secondary>
                                </ion-checkbox>
                            </ion-item>
                        </ion-list>
                    </ion-col>
                </ion-row>
                <button ion-button (click)="updatePermissions()">
                    {{ 'ADMIN.PROFILE_MANAGEMENT.BUTTON.UPDATE' | translate }}
                </button>
            </ion-col>
        </ion-row>
    </ion-grid>
</ion-content>
