<ion-header>
    <ion-navbar>
        <page-header [showSettingsIcon]="true">
            {{'PROFESSIONAL_LEVEL.EVALUATION_SHEET.TITLE' | translate}}
        </page-header>
    </ion-navbar>
</ion-header>

<ion-spinner *ngIf="loading"></ion-spinner>
<ion-content *ngIf="!loading" padding class="evaluation-sheet">
    <ion-card class='title-bloc'>
        <span class='first-text'>{{evaluationSheet.module?.stage?.code - evaluationSheet.module?.label}}</span>
        <span class='date'>{{evaluationSheet.module?.endDate | date: 'dd/MM/yyyy'}}</span>
        <span class='result' [ngClass]='module.resultCode'>{{evaluationSheet.module?.moduleResultStatus}}</span>
    </ion-card>
    <ion-grid>
        <ion-row>
            <ion-col no-padding>
                <ion-card class='score-bloc'>
                    <p>
                        <span class='score-bloc-title'> {{'PROFESSIONAL_LEVEL.EVALUATION_SHEET.SCORE_BLOC.BLOC_1_TITLE' | translate}} :</span>
                        <span class='evaluationSheet.evaluationE1 && evaluationSheet.evaluationE1.score ? score-bloc-value : no-value'>{{evaluationSheet.evaluationE1.score}}
                            ( {{'PROFESSIONAL_LEVEL.EVALUATION_SHEET.SCORE_BLOC.E1_TEXT' | translate}} )</span>
                        <span class='evaluationSheet.evaluationE2 && evaluationSheet.evaluationE2.score ? score-bloc-value : no-value'>{{evaluationSheet.evaluationE2.score}}
                            ( {{'PROFESSIONAL_LEVEL.EVALUATION_SHEET.SCORE_BLOC.E2_TEXT' | translate}} )</span>
                    </p>
                    <ion-grid>
                        <ion-row>
                            <ion-col col-2>
                                <ion-icon name="chatbubbles"></ion-icon>
                            </ion-col>
                            <ion-col col-10>
                                <span class='evaluationSheet.evaluationComment ? score-bloc-comment : no-value'>{{ evaluationSheet.evaluationComment}}</span>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-card>
            </ion-col>
            <ion-col no-padding>
                <ion-card class='score-bloc'>
                    <p>
                        <span class='score-bloc-title'> {{'PROFESSIONAL_LEVEL.EVALUATION_SHEET.SCORE_BLOC.BLOC_2_TITLE' | translate }} : </span>
                        <span class='evaluationSheet.fc && evaluationSheet.fc.score ? score-bloc-value : no-value'>{{ evaluationSheet.fc.score }}</span>
                    </p>
                    <ion-grid>
                        <ion-row>
                            <ion-col col-2>
                                <ion-icon name="chatbubbles"></ion-icon>
                            </ion-col>
                            <ion-col col-10>
                                <span class='evaluationSheet.fc && evaluationSheet.fc.comment ? score-bloc-comment : no-value'>{{ evaluationSheet.fc.comment}}</span>
                            </ion-col>
                        </ion-row>
                    </ion-grid>
                </ion-card>
            </ion-col>
        </ion-row>
    </ion-grid>
    <ion-grid class="title-display">
        <ion-row class='title-row'>
            <ion-col col-8><span>TITLE</span></ion-col>
            <ion-col col-1>E1</ion-col>
            <ion-col col-1>E2</ion-col>
            <ion-col col-1>FC</ion-col>
            <ion-col col-1>NA</ion-col>
        </ion-row>
    </ion-grid>
    <ion-grid class="data-display">
        <div *ngFor="let subModule of evaluationSheet.subModules">
            <ion-row class='ss-title-row'>
                <ion-col col-8><span>subModule.label</span></ion-col>
                <ion-col col-1></ion-col>
                <ion-col col-1></ion-col>
                <ion-col col-1></ion-col>
                <ion-col col-1></ion-col>
            </ion-row>
            <ion-row class='data-row' *ngFor="let exercise of subModule.exercises">
                <ion-col col-8><span>exercise.label</span></ion-col>
                <ion-col col-1 [innerHTML]="subModule.evaluation.type === 'E1' | replaceByPoint"></ion-col>
                <ion-col col-1 [innerHTML]="subModule.evaluation.type === 'E2' | replaceByPoint"></ion-col>
                <ion-col col-1 [innerHTML]="subModule.evaluation.type === 'FC' | replaceByPoint"></ion-col>
                <ion-col col-1 [innerHTML]="subModule.evaluation.type === 'NA' | replaceByPoint"></ion-col>
            </ion-row>
        </div>
    </ion-grid>
</ion-content>
