<ion-header>
        <ion-toolbar>
            <ion-back-button color="white" slot="start"></ion-back-button>
            <page-header  [showSettingsIcon]="true" [pnc]="pnc">
                <span *ngIf="pnc"> {{ 'GLOBAL.BUSINESS_INDICATORS' | isMyPage: pnc | translate }}</span>
            </page-header>
        </ion-toolbar>
        <pnc-edossier-header [activeTab]="TabHeaderEnum.BUSINESS_INDICATORS_PAGE"></pnc-edossier-header>
    </ion-header>
    <ion-content>
        <div class="page-container">
            <edossier-spinner *ngIf="!loadingIsOver(); else pageBlock"></edossier-spinner>
            <ng-template #pageBlock>
                <h3>{{ 'BUSINESS_INDICATORS.6_MONTHS_TITLE' | translate}}</h3>
                <mat-card>
                    <mat-card-content  class="average">
                        <span class="escore">
                            <img class="file-icon" width="60" src="assets/imgs/satisfaction_badge.png" />
                            {{ 'BUSINESS_INDICATORS.ESCORE_AVERAGE' | translate}}
                            <span class="average-number">{{businessIndicator?.averageEscore | number : '1.0-2'}}</span>
                        </span>
                        <span class="actions-aboard">
                            <img class="file-icon" width="60" src="assets/imgs/pnc_aboard.png" />
                            {{ 'BUSINESS_INDICATORS.ABOARD_ACTIONS_AVERAGE' | translate}}
                            <span class="average-number">{{businessIndicator?.averageActionsAboard | number : '1.0-2'}}</span>
                        </span>
                    </mat-card-content>
                </mat-card>

                <h3>{{ 'BUSINESS_INDICATORS.FLIGHT_CARD_12_LAST_MONTHS' | translate}}</h3>
                <table mat-table  matSort (matSortChange)="sortFlightCards($event)" [dataSource]="sortedFlightCards" class="flight-cards-table mat-elevation-z8">
                    <ng-container matColumnDef="flightNumber">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>{{'BUSINESS_INDICATORS.FLIGHT_NUMBER' | translate}}</th>
                        <td mat-cell *matCellDef="let flightDetailsCard">{{flightDetailsCard.flightNumber}}</td>
                    </ng-container>
                    <ng-container matColumnDef="flightDate">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>{{'BUSINESS_INDICATORS.LEG_DATE' | translate}}</th>
                        <td mat-cell *matCellDef="let flightDetailsCard">{{flightDetailsCard.plannedDepartureDate | date : 'dd/MM/yyyy HH:mm'}}</td>
                    </ng-container>
                    <ng-container matColumnDef="stations">
                        <th mat-header-cell *matHeaderCellDef>{{'BUSINESS_INDICATORS.STATIONS' | translate}}</th>
                        <td mat-cell *matCellDef="let flightDetailsCard">{{flightDetailsCard.departureStation}} - {{flightDetailsCard.arrivalStation}}</td>
                    </ng-container>
                    <ng-container matColumnDef="eScore">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>{{'BUSINESS_INDICATORS.ESCORE' | translate}}</th>
                        <td mat-cell *matCellDef="let flightDetailsCard"> {{flightDetailsCard.escore ? flightDetailsCard.escore : '-'}} </td>
                    </ng-container>
                    <ng-container matColumnDef="flightActionsNumber">
                        <th mat-header-cell mat-sort-header *matHeaderCellDef>{{'BUSINESS_INDICATORS.FLIGHT_ACTIONS_NUMBER' | translate}}</th>
                        <td mat-cell *matCellDef="let flightDetailsCard"   class="flight-actions-number"> {{flightDetailsCard.flightActionsTotalNumber ? flightDetailsCard.flightActionsTotalNumber : '-'}} </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="flightCardsColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: flightCardsColumns;"></tr>
                </table>
            </ng-template>
        </div>
    </ion-content>