<ion-card class="flight-crew-card" [ngClass]="{'clickable':!disabled,'disabled':disabled}">

    <ion-card-content no-padding class="pnc-info-panel">
        <offline-indicator [object]="pnc" type="PNC"></offline-indicator>
        <div class="pnc-container">
            <div class="main-info">
                <pnc-photo [pnc]="pnc" [size]="80" [handleCall]="false"></pnc-photo>
                <div class="identity">
                    <span class="value speciality" [ngClass]="{'no-value' : !formatedSpeciality }"> {{ formatedSpeciality }}</span>
                    <span class="value lastname">{{ pnc.lastName }}</span>
                    <span class="value firstname">{{ pnc.firstName }}</span>
                    <span class="value">{{pnc.matricule}}</span>
                </div>
            </div>
            <div class="secondary-info">
                <div class="left-panel">
                    <!-- Div / Secteur / Ginq -->
                    <div class="pnc-info">
                        <label>Division / Secteur / Ginq</label>
                        <span class="value">{{ pnc.assignment.division }} / {{ pnc.assignment.sector }} / {{ pnc.assignment.ginq }}</span>
                    </div>
                    <!-- Relais-->
                    <div class="pnc-info">
                        <label>{{ 'FLIGHT_CREW_LIST.LIST.RELAYS' | translate }}</label>
                        <div class="value pnc-relays" [ngClass]="{'no-value' : pnc.relays.length === 0 }">
                            <span *ngFor="let relay of pnc.relays">
                                {{ relay.code }}
                            </span>
                        </div>
                    </div>
                </div>
                <div class="right-panel">
                    <!-- Spécialisation avion -->
                    <div class="pnc-info" *ngIf="!isCrewMember">
                        <label>{{ 'PNC_SEARCH.CRITERIA.AIRCRAFT_SKILL' | translate }}</label>
                        <div class="value pnc-Array-item" [ngClass]="{'no-value' :  (!pnc.aircraftSkills || pnc.aircraftSkills.length === 0) }">
                            <span *ngFor="let aircraftSkill of pnc.aircraftSkills">
                                {{ aircraftSkill.aircraftType }}
                            </span>
                        </div>
                    </div>
                    <!-- rythme de travail-->
                    <div class="pnc-info" *ngIf="!isCrewMember">
                        <label>{{ 'PNC_SEARCH.CRITERIA.WORK_RATE' | translate }}</label>
                        <span class="value" [ngClass]="{'no-value' : !pnc.workRate }">{{ pnc.workRate }}</span>
                    </div>
                    <!-- Dernière rencontre en vol -->
                    <div class="pnc-info" *ngIf="isCrewMember">
                        <label>{{ 'FLIGHT_CREW_LIST.LIST.LAST_IN_FLIGHT_ENCOUNTER_DATE' | translate }}</label>
                        <span class="value" [ngClass]="{'no-value' : !crewMember.lastInFlightEncounterDate }">{{ crewMember.lastInFlightEncounterDate | date:'dd/MM/yyyy' }}</span>
                    </div>
                    <!-- Dernière rencontre en sol -->
                    <div class="pnc-info" *ngIf="isCrewMember">
                        <label>{{ 'FLIGHT_CREW_LIST.LIST.LAST_ON_GROUND_ENCOUNTER_DATE' | translate }}</label>
                        <span class="value" [ngClass]="{'no-value' : !crewMember.lastOnGroundEncounterDate }">{{ crewMember.lastOnGroundEncounterDate | date:'dd/MM/yyyy' }}</span>
                    </div>

                </div>
            </div>
            <div class="flag-panel">

                <div>
                    <download-button [synchroInProgress]="synchroInProgress" (onDownload)="downloadPncEdossier(pnc.matricule)"></download-button>
                </div>
                <div class="sub-flag-panel">
                    <!-- Prioritaire -->
                    <ion-icon class="prioritized" *ngIf="pnc.prioritized" name="flag" ios="md-flag"></ion-icon>
                    <!-- Si au moins une Priorité en cours -->
                    <ion-icon class="at-least-one-priority" *ngIf="pnc.hasAtLeastOnePriorityInProgress" name="flag" ios="md-flag"></ion-icon>
                </div>
                <div>
                    <!-- Particularite -->
                    <span class="value">{{crewMember?.particularity }}</span>
                </div>
            </div>
        </div>
    </ion-card-content>
</ion-card>
